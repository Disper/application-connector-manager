# CI/CD

## Pipelines running on pull requests

The following CI jobs are part of the development cycle. They verify the functional correctness of Application Connector Manager but do not verify the contract concerning Kyma's Lifecycle Manager.

| Name                                                                                                                                                           | Required | Platform   | Description                                                                                                                                                                                             |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`pre-application-connector-manager-build`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1059)                | true     | prow       | Builds Application Connector Manager's image and pushes it to the `dev` registry.                                                                                                                       |
| [`pre-application-connector-manager-presubmit-scanner`](https://github.com/kyma-project/test-infra/blob/main/prow/jobs/test-infra/presubmit-scanner.yaml#L556) | true     | prow       | Runs the Gitleaks presubmit scanner to detect committed sensitive data for Application Connector Manager.                                                                                                    |
| [`pre-application-connector-module-build`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1031)                 | true     | prow       | Builds module's OCI image and pushes it to the `dev` artifact registry. Renders ModuleTemplate for the Application Connector module that allows for manual integration tests against Lifecycle Manager. |
| [`pre-main-application-connector-manager-verify`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1093)          | true     | prow       | Installs Application Connector Manager, not using Lifecycle Manager, and applies the sample Application Connector CR on a k3d cluster. Executes smoke integration test of Application Connector.         |
| [`golangci-lint `](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/golangci-lint.yaml)                               | true     | GH Actions | Is responsible for linting and static code analysis.                                                                                                                                                       |
| [`Run unit tests`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/run-tests.yaml)                                   | true     | GH Actions | Executes basic create/update/delete functional tests of Application Connector Manager's reconciliation logic.                                                                                           |
| [`Run integration tests`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/run-validation.yaml)                       | true     | GH Actions | Installs Application Connector Manager, not using Lifecycle Manager, and applies the sample Application Connector CR on a k3d cluster. Executes smoke integration test of Application Connector.         |
| [`Run vuln check`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/run-vuln-check.yaml)                              | true     | GH Actions | Executes the [govulncheck](https://pkg.go.dev/golang.org/x/vuln/cmd/govulncheck) tool on the Application Connector Manager code to detect known vulnerabilities.                                                |

## Pipelines running on main branch

The following CI jobs regenerate Application Connector Manager’s artifacts and initiate integration tests of Application Connector Manager to verify the contract with respect to Kyma’s Lifecycle Manager.

| Name                                                                                                                                                                   | Platform   | Description                                                                                                                                                                                                                                                          |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [`post-application-connector-manager-build`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1073)                       | prow       | Re-builds manager's image and pushes it into the `prod` registry.                                                                                                                                                                                                    |
| [`post-application-connector-module-build`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1007)                        | prow       | Re-builds the module's OCI image and pushes it to the `prod` artifact registry.                                                                                                                                                                                      |
                                                                                                                                                                                    
| [`post-main-application-connector-manager-upgrade-latest-to-main`](https://github.com/kyma-project/test-infra/blob/main/templates/data/generic_module_data.yaml#L1112) | prow       | Installs Application Connector module, using ModuleTemplate and Lifecycle Manager, from the latest released version and upgrades it to the version from `main`. Verifies reconciliation status on Kyma CR and runs smoke integration tests of Application Connector. |
| [`Run integration tests`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/run-validation.yaml)                               | GH Actions | Installs Application Connector Manager, using Lifecyle Manager, applies Kyma CR and enables Application Connector module on a k3d cluster. Executes smoke integration test of Application Connector.                                                                 |
| [`Run unit tests`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/run-tests.yaml)                                           | GH Actions | Executes basic create/update/delete functional tests of Application Connector Manager's reconciliation logic.                                                                                                                                                        |
| [`golangci-lint`](https://github.com/kyma-project/application-connector-manager/blob/main/.github/workflows/golangci-lint.yaml)                                        | GH Actions | Is responsible for linting and static code analysis.                                                                                                                                                                                                                    |
